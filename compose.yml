services:
    dev-frontend:
        image: node:25-alpine
        restart: unless-stopped
        working_dir: /app
        volumes:
            - ./frontend:/app:rw
            - node_modules:/app/node_modules
        ports:
            - "4200:4200"
        command: sh -c "npm install && npm start -- --host 0.0.0.0"
    dev-backend:
        build: 
            context: ./docker/backend
            dockerfile: Dockerfile.dev
        restart: unless-stopped
        working_dir: /app
        volumes:
            - ./backend:/app:rw
            - vendor:/app/vendor
        ports:
            - "8000:8000"
        command: sh -c "composer install && php artisan serve --host=0.0.0.0 --port=8000"
    dev-database:
        image: postgis/postgis:18-3.6-alpine
        restart: unless-stopped
        volumes:
            - db:/var/lib/postgresql

volumes:
    node_modules:
    vendor:
    db:
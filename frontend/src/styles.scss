@use './styles/constants.scss';
@use '@ng-select/ng-select/themes/default.theme.css';

@font-face {
    font-family: 'mainFont';
    src: url('../public/fonts/Poppins-Light.ttf');
    font-weight: 300;
}

@font-face {
    font-family: 'mainFont';
    src: url('../public/fonts/Poppins-Regular.ttf');
    font-weight: 400
}

@font-face {
    font-family: 'mainFont';
    src: url('../public/fonts/Poppins-Medium.ttf');
    font-weight: 500;
}

@font-face {
    font-family: 'mainFont';
    src: url('../public/fonts/Poppins-SemiBold.ttf');
    font-weight: 600;
}

@font-face {
    font-family: 'mainFont';
    src: url('../public/fonts/Poppins-Bold.ttf');
    font-weight: 700;
}

* {
    font-family: 'mainFont';
}

.item-pressable {
    cursor: pointer;
    transition: transform ease 0.15s;

    &:hover {
        transform: scale(1.21);
    }

    &:active {
        transform: scale(1.05);
    }
}

@layer base {
  .input::placeholder,
  .textarea::placeholder {
    opacity: 0.5;
  }
}

// =====================================================
// ng-select daisyUI/Tailwind style overrides (temporary)
// =====================================================
.ng-select {
    // Main container - match daisyUI input sizing exactly
    &.ng-select-single,
    &.ng-select-multiple {
        .ng-select-container {
            background-color: var(--color-base-100);
            border: 1px solid color-mix(in oklab, var(--color-base-content) 20%, transparent);
            border-radius: var(--radius-field, 0.5rem);
            // Match daisyUI input height exactly
            min-height: calc(var(--size-field, 0.25rem) * 10);
            height: calc(var(--size-field, 0.25rem) * 10);
            // Match daisyUI input font-size
            font-size: 0.75rem;
            transition: border-color 0.2s, outline 0.2s, box-shadow 0.2s;

            .ng-value-container {
                padding-left: 0.75rem;
                padding-right: 0.75rem;

                .ng-placeholder {
                    color: color-mix(in oklab, var(--color-base-content) 50%, transparent);
                    font-size: 0.75rem;
                }

                .ng-input {
                    padding-left: 0;
                    padding-right: 0;

                    > input {
                        color: var(--color-base-content);
                        font-size: 0.75rem;
                    }
                }
            }

            // Arrow indicator
            .ng-arrow-wrapper {
                padding-left: 0.5rem;
                padding-right: 0.5rem;

                .ng-arrow {
                    border-color: currentColor transparent transparent;
                    border-width: 4px 4px 2px;
                }
            }

            // Clear button
            .ng-clear-wrapper {
                color: color-mix(in oklab, var(--color-base-content) 50%, transparent);

                &:hover {
                    color: var(--color-base-content);
                }
            }
        }

        // Focused state - match daisyUI focus (without border issues)
        &.ng-select-focused {
            .ng-select-container {
                border-color: var(--color-base-content);
                outline: 2px solid var(--color-base-content);
                outline-offset: 2px;
                box-shadow: none;
                // Force consistent border-radius
                border-radius: var(--radius-field, 0.5rem) !important;
            }
        }

        // Opened state - keep rounded corners
        &.ng-select-opened {
            .ng-select-container {
                border-color: var(--color-base-content);
                // Force consistent border-radius when dropdown is open
                border-radius: var(--radius-field, 0.5rem) !important;
            }

            .ng-arrow-wrapper .ng-arrow {
                border-color: transparent transparent currentColor;
                border-width: 2px 4px 4px;
            }
        }

        // Disabled state
        &.ng-select-disabled {
            .ng-select-container {
                background-color: var(--color-base-200);
                border-color: var(--color-base-200);
                cursor: not-allowed;

                .ng-value-container .ng-placeholder {
                    color: color-mix(in oklab, var(--color-base-content) 20%, transparent);
                }
            }
        }
    }

    // Multiple select - tags/chips styling with primary accent
    &.ng-select-multiple {
        .ng-select-container {
            height: auto;
            min-height: calc(var(--size-field, 0.25rem) * 10);

            .ng-value-container {
                flex-wrap: wrap;
                gap: 0.25rem;
                padding-top: 0.25rem;
                padding-bottom: 0.25rem;

                .ng-value {
                    // Primary accent for selected tags
                    background-color: color-mix(in oklab, var(--color-primary) 15%, transparent);
                    color: var(--color-primary);
                    border: 1px solid color-mix(in oklab, var(--color-primary) 30%, transparent);
                    border-radius: 0.375rem;
                    font-size: 0.6875rem;
                    padding: 0.0625rem 0.375rem;
                    margin: 0;

                    .ng-value-icon {
                        padding-left: 0.125rem;
                        padding-right: 0.25rem;
                        border-radius: 0.25rem 0 0 0.25rem;
                        color: var(--color-primary);

                        &:hover {
                            background-color: color-mix(in oklab, var(--color-primary) 25%, transparent);
                        }

                        &.left {
                            border-right: none;
                        }
                    }

                    .ng-value-label {
                        padding-left: 0.125rem;
                        padding-right: 0.125rem;
                    }
                }
            }
        }
    }

    // Dropdown panel
    .ng-dropdown-panel {
        background-color: var(--color-base-100);
        border: 1px solid var(--color-base-200);
        border-radius: var(--radius-box, 0.5rem);
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        margin-top: 0.25rem;
        overflow: hidden;
        z-index: 1050;

        .ng-dropdown-header {
            border-bottom: 1px solid var(--color-base-200);
            padding: 0.5rem 0.75rem;
        }

        .ng-dropdown-footer {
            border-top: 1px solid var(--color-base-200);
            padding: 0.5rem 0.75rem;
        }

        .ng-dropdown-panel-items {
            padding: 0.25rem;
            // Add spacing between options
            display: flex;
            flex-direction: column;
            gap: 0.125rem;

            .ng-optgroup {
                color: color-mix(in oklab, var(--color-base-content) 70%, transparent);
                font-weight: 500;
                padding: 0.375rem 0.75rem;
                font-size: 0.6875rem;
                text-transform: uppercase;
            }

            .ng-option {
                border-radius: var(--radius-field, 0.375rem);
                padding: 0.375rem 0.75rem;
                font-size: 0.75rem;
                color: var(--color-base-content);
                transition: background-color 0.2s, color 0.2s;

                &.ng-option-marked {
                    background-color: color-mix(in oklab, var(--color-base-content) 12%, transparent);
                }

                &.ng-option-selected {
                    // Muted text - looks inactive/already selected
                    background-color: transparent;
                    color: var(--color-base-content);
                    opacity: 0.4;
                    font-weight: 400;

                    &.ng-option-marked {
                        // Show background only on hover
                        background-color: color-mix(in oklab, var(--color-base-content) 12%, transparent);
                    }
                }

                &.ng-option-disabled {
                    color: color-mix(in oklab, var(--color-base-content) 40%, transparent);
                    cursor: not-allowed;
                }

                // Highlighted text in search
                .ng-option-label .highlighted {
                    font-weight: 600;
                }
            }
        }

        // Dropdown position styling
        &.ng-select-bottom {
            border-radius: var(--radius-box, 0.5rem);
        }

        &.ng-select-top {
            border-radius: var(--radius-box, 0.5rem);
            margin-bottom: 0.25rem;
            margin-top: 0;
        }
    }

    // Loading spinner
    .ng-spinner-loader {
        border-color: color-mix(in oklab, var(--color-base-content) 30%, transparent);
        border-top-color: var(--color-primary);
    }

    // "No items found" / "Type to search" messages
    .ng-dropdown-panel .ng-dropdown-panel-items {
        .ng-option.ng-option-disabled {
            text-align: center;
            color: color-mix(in oklab, var(--color-base-content) 50%, transparent);
            font-style: italic;
        }
    }
}

// Floating label compatibility fix for ng-select
.floating-label ng-select {
    width: 100%;
}
